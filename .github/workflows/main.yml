name: Simple CI/CD


on:
  push:
    branches: [ main ]
  # â†‘ áƒ áƒáƒªáƒ "main" branch-áƒ–áƒ” git push áƒ’áƒáƒáƒ™áƒ”áƒ—áƒ”áƒ‘

# ğŸ“Œ JOBS: áƒ áƒ áƒ£áƒœáƒ“áƒ áƒ’áƒáƒáƒ™áƒ”áƒ—áƒáƒ¡
jobs:
  build:
    name: Build Docker Image
    runs-on: ubuntu-latest  # GitHub-áƒ˜áƒ¡ Ubuntu server    
    steps:
      # STEP 1: áƒ™áƒáƒ“áƒ˜áƒ¡ áƒ©áƒáƒ›áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ•áƒ
      - name: ğŸ“¥ Download Code
        uses: actions/checkout@v4
        # áƒ áƒáƒ¡ áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ¡: git clone (áƒ¨áƒ”áƒœáƒ˜ áƒ™áƒáƒ“áƒ˜ GitHub-áƒ“áƒáƒœ)
      # STEP 2: Docker Build
      - name: ğŸ—ï¸ Build Docker Image
        run: |
          docker build -t my-portfolio:latest .
      - name: ğŸ§ª Test Website
        run: |
          docker run -d -p 8080:80 --name test my-portfolio:latest
          sleep 5
          curl http://localhost:8080
        # áƒ áƒáƒ¡ áƒáƒ™áƒ”áƒ—áƒ”áƒ‘áƒ¡:
        # 1. Container áƒ’áƒáƒ¨áƒ•áƒ”áƒ‘áƒ (
      - name: âœ… Done
        run: |
          echo "Build successful! ğŸ‰"
          docker stop test
          docker rm test
EOF
